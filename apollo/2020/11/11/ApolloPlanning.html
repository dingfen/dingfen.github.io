<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.19.3 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="zh" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Apollo Planning è§„åˆ’æ¨¡å— - å³°å­çš„ä¹å›­</title>
<meta name="description" content="è§„åˆ’æ¨¡å—ï¼šç”Ÿæˆè½¦è¾†è¿åŠ¨è½¨è¿¹">


  <meta name="author" content="Bill Ding">


<meta property="og:type" content="article">
<meta property="og:locale" content="zh_CN">
<meta property="og:site_name" content="å³°å­çš„ä¹å›­">
<meta property="og:title" content="Apollo Planning è§„åˆ’æ¨¡å—">
<meta property="og:url" content="http://localhost:4000/apollo/2020/11/11/ApolloPlanning.html">


  <meta property="og:description" content="è§„åˆ’æ¨¡å—ï¼šç”Ÿæˆè½¦è¾†è¿åŠ¨è½¨è¿¹">



  <meta property="og:image" content="http://localhost:4000/assets/img/teaser2.jpg">





  <meta property="article:published_time" content="2020-11-11T00:00:00+08:00">





  

  


<link rel="canonical" href="http://localhost:4000/apollo/2020/11/11/ApolloPlanning.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Bill Ding",
      "url": "http://localhost:4000/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="å³°å­çš„ä¹å›­ Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single categories">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          å³°å­çš„ä¹å›­
          <span class="site-subtitle">åˆæŠ±ä¹‹æœ¨ï¼Œç”Ÿäºæ¯«æœ«ï¼›ä¹å±‚ä¹‹å°ï¼Œèµ·äºç´¯åœŸï¼›åƒé‡Œä¹‹è¡Œï¼Œå§‹äºè¶³ä¸‹</span>
        </a>
        <ul class="visible-links">
<li class="masthead__menu-item">
              <a href="/">Home</a>
            </li>
<li class="masthead__menu-item">
              <a href="/home/about">About</a>
            </li>
<li class="masthead__menu-item">
              <a href="/home/blog">Blogs</a>
            </li>
<li class="masthead__menu-item">
              <a href="/categories">Categories</a>
            </li>
<li class="masthead__menu-item">
              <a href="https://google.com">External Link</a>
            </li>
</ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">åˆ‡æ¢èœå•</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  







<div class="page__hero--overlay" style=" background-image: url('/assets/img/teaser2.jpg');">
  
    <div class="wrapper">
      <h1 id="page-title" class="page__title" itemprop="headline">
        
          Apollo Planning è§„åˆ’æ¨¡å—

        
      </h1>
      
        <p class="page__lead">è§„åˆ’æ¨¡å—ï¼šç”Ÿæˆè½¦è¾†è¿åŠ¨è½¨è¿¹
</p>
      
      
        <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  4 minutes read

</p>
      
      
      
    </div>
  
  
</div>





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/img/avatar.jpg" alt="Bill Ding" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Bill Ding</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Programmer, Graduate majored in CS</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Hefei, Anhui, China</span>
        </li>
      

      
        
          
            <li><a href="df12138@mail.ustc.edu.cn" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span></a></li>
          
        
          
            <li><a href="https://github.com/dingfen" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Apollo Planning è§„åˆ’æ¨¡å—">
    <meta itemprop="description" content="è§„åˆ’æ¨¡å—ï¼šç”Ÿæˆè½¦è¾†è¿åŠ¨è½¨è¿¹">
    <meta itemprop="datePublished" content="2020-11-11T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title">
<i class="fas fa-file-alt"></i> ç›®å½•</h4></header>
              <ul class="toc__menu">
  <li>
<a href="#apollo-planning-%E6%A8%A1%E5%9D%97">Apollo Planning æ¨¡å—</a>
    <ul>
      <li><a href="#%E5%89%8D%E8%A8%80">å‰è¨€</a></li>
      <li>
<a href="#%E5%9C%BA%E6%99%AF">åœºæ™¯</a>
        <ul>
          <li><a href="#%E6%B2%BF%E8%BD%A6%E9%81%93%E7%BA%BF%E8%A1%8C%E9%A9%B6">æ²¿è½¦é“çº¿è¡Œé©¶</a></li>
          <li><a href="#%E4%BC%9A%E8%BD%A6">ä¼šè½¦</a></li>
          <li><a href="#%E5%81%9C%E8%BD%A6">åœè½¦</a></li>
          <li><a href="#%E5%8D%B3%E5%81%9C%E5%8D%B3%E8%B5%B0park-and-go">å³åœå³èµ°ï¼ˆPark-and-goï¼‰</a></li>
          <li><a href="#%E7%B4%A7%E6%80%A5%E7%8A%B6%E5%86%B5">ç´§æ€¥çŠ¶å†µ</a></li>
        </ul>
      </li>
      <li><a href="#%E8%A7%84%E5%88%92%E6%A8%A1%E5%9D%97%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84">è§„åˆ’æ¨¡å—çš„ä½“ç³»ç»“æ„</a></li>
      <li>
<a href="#%E8%A7%84%E5%88%92%E6%A8%A1%E5%9D%97%E4%B9%8B%E7%BB%84%E4%BB%B6%E7%B1%BB">è§„åˆ’æ¨¡å—ä¹‹ç»„ä»¶ç±»</a>
        <ul>
          <li><a href="#%E5%88%9D%E5%A7%8B%E5%8C%96">åˆå§‹åŒ–</a></li>
          <li><a href="#%E5%A4%84%E7%90%86">å¤„ç†</a></li>
          <li><a href="#%E8%BE%93%E5%85%A5%E6%95%B0%E6%8D%AE">è¾“å…¥æ•°æ®</a></li>
          <li><a href="#%E7%94%9F%E6%88%90%E8%BD%A8%E8%BF%B9">ç”Ÿæˆè½¨è¿¹</a></li>
        </ul>
      </li>
      <li><a href="#%E5%8F%82%E8%80%83">å‚è€ƒ</a></li>
    </ul>
  </li>
</ul>

            </nav>
          </aside>
        
        <h1 id="apollo-planning-æ¨¡å—">Apollo Planning æ¨¡å—</h1>

<h2 id="å‰è¨€">å‰è¨€</h2>

<p>æœ¬ç¯‡åšå®¢å¯¹ Apollo çš„è§„åˆ’ï¼ˆPlanningï¼‰æ¨¡å—åšè¯¦ç»†ä»‹ç»ã€‚æ ¹æ®å®˜æ–¹æ–‡æ¡£<sup>1</sup>ï¼Œè§„åˆ’æ¨¡å—çš„ä¸»è¦åŠŸèƒ½æ˜¯å¯¹è‡ªåŠ¨é©¾é©¶è½¦è¾†æœªæ¥çš„æ—¶ç©ºè½¨è¿¹è¿›è¡Œè§„åˆ’ã€‚ä¸ºäº†è®©è¯»è€…å¯¹è§„åˆ’æ¨¡å—åœ¨æ•´ä¸ª Apollo ç³»ç»Ÿä¸­çš„ä½ç½®æœ‰ä¸€ä¸ªå¤§è‡´çš„å°è±¡ï¼Œæˆ‘ç‰¹æ„ä»å®˜ç½‘ä¸Šæˆªå–æ­¤å›¾ğŸ‘‡ã€‚å¯ä»¥çœ‹åˆ°è§„åˆ’æ¨¡å—çš„æ•°æ®ä¸Šæ¸¸æ˜¯å®šä½ï¼ˆLocalizationï¼‰ï¼Œé¢„æµ‹ï¼ˆPredictionï¼‰ï¼Œæ„ŸçŸ¥ï¼ˆPerceptionï¼‰æ¨¡å—ï¼Œè€Œä¸‹æ¸¸æ˜¯æ§åˆ¶ï¼ˆControlï¼‰æ¨¡å—ã€‚</p>

<p><img src="/assets/img/Apollo_3_5_software_architecture.png" alt=""></p>

<h2 id="åœºæ™¯">åœºæ™¯</h2>

<p>è§„åˆ’æ¨¡å—ä¸­ï¼ŒApollo è®¾è®¡å›¢é˜Ÿå¼•å…¥äº†åœºæ™¯çš„æ¦‚å¿µï¼Œæ¯ä¸ªé©¾é©¶æ¡ˆä¾‹éƒ½è¢«å½“åšä¸ºä¸€ä¸ªä¸åŒçš„é©¾é©¶åœºæ™¯ï¼Œè¿™ä½¿å¾—è§„åˆ’æ¨¡å—æ›´å…·æ¨¡å—åŒ–ï¼Œä¸”æ›´æœ‰é’ˆå¯¹æ€§ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå¯¹ä¸€ä¸ªç‰¹å®šåœºæ™¯çš„ä¿®æ”¹ä¸ä¼šå½±å“å…¶ä»–åœºæ™¯ã€‚Apollo 5.5 ä¸»è¦æ³¨é‡äºåŸå¸‚é“è·¯ä¸Šçš„æ²¿è½¦é“çº¿è‡ªåŠ¨é©¾é©¶ï¼Œå¹¶å¼•å…¥äº†ä¸¤ç§æ–°çš„è§„åˆ’åœºæ™¯<sup>2</sup>ã€‚è¿™é‡Œä¸»è¦ä»‹ç» 5 ç§é©¾é©¶åœºæ™¯ï¼Œç”±äºç¯‡å¹…åŸå› ï¼Œæˆ‘å°±åœ¨è¿™é‡Œåšç®€è¦ä»‹ç»ï¼Œè¯¦ç»†å†…å®¹å¯ä»¥ç‚¹å‡»<a href="https://github.com/ApolloAuto/apollo/blob/r5.5.0/modules/planning/README.md">å‚è€ƒæ–‡çŒ® [2]</a>ã€‚</p>

<h3 id="æ²¿è½¦é“çº¿è¡Œé©¶">æ²¿è½¦é“çº¿è¡Œé©¶</h3>

<p>é»˜è®¤åœºæ™¯æ¨¡å¼ï¼Œè¯¥åœºæ™¯åŒ…æ‹¬ä½†ä¸é™äºéµå®ˆåŸºæœ¬äº¤é€šè§„åˆ™ï¼Œæˆ–è€…åŸºæœ¬è½¬å¼¯çš„å•è½¦é“ï¼ˆä¾‹å¦‚å·¡èˆªï¼‰æˆ–å˜é“ã€‚</p>

<center>
    <img src="https://github.com/ApolloAuto/apollo/raw/r5.5.0/modules/planning/images/Planning_default.png" width="80%">
</center>

<h3 id="ä¼šè½¦">ä¼šè½¦</h3>

<p>è¯¥åœºæ™¯åŒ…æ‹¬äº†åœ¨æœ‰åœ<img class="emoji" title=":stop_sign:" alt=":stop_sign:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f6d1.png" height="20" width="20"> æ ‡å¿—çš„ã€æœ‰äº¤é€šç¯ <img class="emoji" title=":traffic_light:" alt=":traffic_light:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f6a5.png" height="20" width="20"> çš„ã€ä»€ä¹ˆéƒ½æ²¡æœ‰çš„åå­—è·¯å£ä¸Šçš„ä¼šè½¦æƒ…å†µã€‚æ€»çš„æ¥è¯´ï¼Œè‡ªåŠ¨é©¾é©¶è½¦è¾†åœ¨é‡åˆ°è¿™äº›åå­—è·¯å£æ—¶ï¼Œéƒ½ä¼šå…ˆæŠµè¾¾åå­—è·¯å£è¾¹ï¼Œç„¶åæ³¨æ„è§‚å¯Ÿæ¥å¾€è½¦è¾†å¹¶å°å¿ƒå‰è¿›ï¼Œæœ€ç»ˆé€šè¿‡åå­—è·¯å£</p>

<center>
	<img src="https://github.com/ApolloAuto/apollo/raw/r5.5.0/modules/planning/images/unprotected1.png" width="80%">
</center>

<h3 id="åœè½¦">åœè½¦</h3>

<p>åœè½¦åœºæ™¯ä¸­é‡‡ç”¨äº†ä¸€ä¸ªä»¤ Apollo å›¢é˜Ÿæ„Ÿåˆ°éå¸¸éª„å‚²çš„ <a href="https://github.com/ApolloAuto/apollo/blob/master/docs/specs/Open_Space_Planner.md">Open Space Planner</a> ç®—æ³•ï¼Œè¯¥è§„åˆ’ç®—æ³•å°¤å…¶é€‚ç”¨äºåœè½¦åœºæ™¯ã€‚æ–‡æ¡£ä¸­ï¼Œä¸€å…±ä»‹ç»äº†ä¸¤ä¸ªå­åœºæ™¯ï¼š</p>

<ul>
  <li>
    <p>Valet åœºæ™¯ï¼Œç”¨äºå°†è½¦è¾†åœæ”¾åœ¨ä¸€ä¸ªç›®æ ‡è½¦ä½ä¸­</p>

    <center>
      <img src="https://github.com/ApolloAuto/apollo/raw/r5.5.0/modules/planning/images/parking2.png" width="80%">
  </center>
  </li>
  <li>
    <p>Pull Over åœºæ™¯ï¼Œç”¨äºåˆ°è¾¾ç›®çš„åœ°åï¼Œå®Œæˆçš„è·¯è¾¹åœè½¦ä»»åŠ¡ã€‚</p>

    <center>
      <img src="https://github.com/ApolloAuto/apollo/raw/r5.5.0/modules/planning/images/pull_over1.png" width="80%">
  </center>
  </li>
</ul>

<h3 id="å³åœå³èµ°park-and-go">å³åœå³èµ°ï¼ˆPark-and-goï¼‰</h3>

<p>å³åœå³èµ°åœºæ™¯ç”¨äºè·¯è¾¹åœè½¦ï¼Œå¹¶å¼€å§‹ç”Ÿæˆåˆ°è¾¾ä¸‹ä¸€ä¸ªç›®çš„åœ°çš„æ–°è·¯å¾„ï¼Œæœ‰ç‚¹åƒå‡ºç§Ÿè½¦æ”¾ä¸‹ä¸€åä¹˜å®¢åçš„åœºæ™¯ï¼Œå¯¹äºè·¯è¾¹äº¤ä»˜ï¼Œä¹˜å®¢æ¥é€æˆ–ä¸‹è½¦ç­‰æƒ…å†µéå¸¸æœ‰ç”¨ã€‚è¯¥åœºæ™¯å°† Open Space Planner ç®—æ³•ä¸å…¶ä»–ä¼ ç»Ÿçš„è½¨è¿¹è§„åˆ’ç®—æ³•ç»“åˆåœ¨ä¸€èµ·ï¼Œä»¥ç¡®ä¿æ±½è½¦ä¸ä»…å®‰å…¨åœè½¦ï¼Œè€Œä¸”è¿˜èƒ½å¤ŸæŒ‰ç…§ç”Ÿæˆçš„è½¨è¿¹é©¶å‡ºåœè½¦ä½ã€‚</p>

<center>
    <img src="https://github.com/ApolloAuto/apollo/raw/r5.5.0/modules/planning/images/park_and_go.png" width="80%">
</center>

<h3 id="ç´§æ€¥çŠ¶å†µ">ç´§æ€¥çŠ¶å†µ</h3>

<p>ç´§æ€¥åœºæ™¯æ˜¯ä¸ºç¡®ä¿åœ¨ç»™å®šè§¦å‘äº‹ä»¶çš„æƒ…å†µä¸‹ï¼ˆé€šè¿‡äººå·¥è¾“å…¥æˆ–ç”±äºä¸€ä¸ªæˆ–å¤šä¸ªè½¯ç¡¬ä»¶æ•…éšœï¼‰è®©è½¦è¾†èƒ½å®‰å…¨åœä¸‹ã€‚ è¯¥åœºæ™¯å¯¹äºåŸå¸‚é©¾é©¶æä¸ºé‡è¦ï¼Œå› ä¸ºåœ¨é“è·¯ä¸Šç»å¸¸ä¼šé‡åˆ°å‡ ç§æ— æ³•é¢„æ–™çš„æƒ…å†µï¼Œè¦æ±‚è½¦è¾†å®Œå…¨åœè½¦ã€‚ä¾‹å¦‚ï¼Œæœ‰ä¸¤ç§ç±»å‹çš„ç´§æ€¥åœè½¦ï¼š</p>

<ul>
  <li>é è¾¹åœè½¦ï¼Œè‡ªåŠ¨é©¾é©¶è½¦è¾†ä½¿ç”¨ Open Space Planner é è¾¹åœè½¦</li>
  <li>åœ¨è½¦é“åœæ­¢ï¼Œè‡ªåŠ¨é©¾é©¶æ±½è½¦åœ¨å……åˆ†æ„è¯†åˆ°å‘¨é­å®‰å…¨çš„æƒ…å†µä¸‹ï¼Œåœ¨è½¦é“å†…åœè½¦</li>
</ul>

<center>
    <img src="https://github.com/ApolloAuto/apollo/raw/r5.5.0/modules/planning/images/emergency.png" width="80%">
</center>

<h2 id="è§„åˆ’æ¨¡å—çš„ä½“ç³»ç»“æ„">è§„åˆ’æ¨¡å—çš„ä½“ç³»ç»“æ„</h2>

<p>åœ¨ Apollo 5.5 ç‰ˆæœ¬ä¸­ï¼ŒApollo å›¢é˜Ÿå¯¹è§„åˆ’æ¨¡å—çš„ä½“ç³»ç»“æ„è¿›è¡Œäº†ä¿®æ”¹ï¼Œä»¥çº³å…¥åŸå¸‚é“è·¯ä¸Šçš„æ–°é©¾é©¶æ–¹æ¡ˆã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå› ä¸ºæ–°åŠ å…¥äº†æœ‰ä¸¤ç§å¤æ‚æ–¹æ¡ˆï¼šç´§æ€¥æƒ…å†µå’Œå³åœå³èµ°ã€‚ä¸ºäº†æœ‰æ•ˆåœ°ä½¿ç”¨è¿™äº›æ–¹æ¡ˆï¼Œå›¢é˜Ÿå¼•å…¥äº† 2 ä¸ªæ–°çš„å†³ç­–å™¨â€”è·¯å¾„é‡ç”¨å†³ç­–å™¨ï¼ˆPath Reuse Deciderï¼‰å’Œé™é€Ÿå†³ç­–å™¨ï¼ˆSpeed Bound Deciderï¼‰ï¼Œå¹¶æ›´æ–°äº†ç°æœ‰å†³ç­–å™¨ï¼Œä½¿è§„åˆ’ä½“ç³»ç»“æ„æ—¢å¼ºå¤§åˆçµæ´»ï¼Œè¶³ä»¥åº”ä»˜è®¸å¤šä¸åŒç±»å‹çš„åŸå¸‚é“è·¯é©¾é©¶æ–¹æ¡ˆã€‚</p>

<p>æ¯ä¸ªé©¾é©¶åœºæ™¯éƒ½æœ‰å…¶ç‹¬ç‰¹çš„é©¾é©¶å‚æ•°é›†ï¼Œä½¿å…¶æ›´å®‰å…¨ï¼Œé«˜æ•ˆï¼Œæ›´æ˜“äºè‡ªå®šä¹‰å’Œè°ƒè¯•ï¼Œä¹Ÿæ›´åŠ çµæ´»ã€‚</p>

<center>
    <img src="https://github.com/ApolloAuto/apollo/raw/r5.5.0/modules/planning/images/architecture_5.5.png">
</center>
<h2 id="è§„åˆ’æ¨¡å—ä¹‹ç»„ä»¶ç±»">è§„åˆ’æ¨¡å—ä¹‹ç»„ä»¶ç±»</h2>

<p>å¦‚æœä½ è®¤çœŸäº†è§£äº† <a href="https://dingfen.github.io/apollo/2020/10/25/CyberComponent.html">Apollo Cyber RT ç»„ä»¶</a>çš„ç›¸å…³çŸ¥è¯†ï¼Œå°±æ˜ç™½æ¨¡å—çš„èµ·ç‚¹å°±æ˜¯ <code class="language-plaintext highlighter-rouge">Component</code> ç±»ï¼Œä¸€åˆ‡çš„æ¨¡å—éƒ½æ˜¯ç»§æ‰¿ <code class="language-plaintext highlighter-rouge">Component</code> ç±»è€Œæ¥çš„ã€‚è‡ªç„¶åœ°ï¼Œæˆ‘æŠŠè¿™å®ƒä½œä¸ºå…¨é¢è®¤è¯†è§„åˆ’æ¨¡å—çš„åˆ‡å…¥ç‚¹ã€‚</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PlanningComponent</span> <span class="k">final</span>
    <span class="o">:</span> <span class="k">public</span> <span class="n">cyber</span><span class="o">::</span><span class="n">Component</span><span class="o">&lt;</span><span class="n">prediction</span><span class="o">::</span><span class="n">PredictionObstacles</span><span class="p">,</span> <span class="n">canbus</span><span class="o">::</span><span class="n">Chassis</span><span class="p">,</span>
                              <span class="n">localization</span><span class="o">::</span><span class="n">LocalizationEstimate</span><span class="o">&gt;</span> <span class="p">{</span>
 <span class="nl">public:</span>
  <span class="kt">bool</span> <span class="n">Init</span><span class="p">()</span> <span class="k">override</span><span class="p">;</span>
  <span class="kt">bool</span> <span class="n">Proc</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">prediction</span><span class="o">::</span><span class="n">PredictionObstacles</span><span class="o">&gt;&amp;</span>
                <span class="n">prediction_obstacles</span><span class="p">,</span>
            <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">canbus</span><span class="o">::</span><span class="n">Chassis</span><span class="o">&gt;&amp;</span> <span class="n">chassis</span><span class="p">,</span>
            <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">localization</span><span class="o">::</span><span class="n">LocalizationEstimate</span><span class="o">&gt;&amp;</span>
                <span class="n">localization_estimate</span><span class="p">)</span> <span class="k">override</span><span class="p">;</span>
 <span class="nl">private:</span>
  <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">cyber</span><span class="o">::</span><span class="n">Reader</span><span class="o">&lt;</span><span class="n">perception</span><span class="o">::</span><span class="n">TrafficLightDetection</span><span class="o">&gt;&gt;</span>
      <span class="n">traffic_light_reader_</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">cyber</span><span class="o">::</span><span class="n">Reader</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">RoutingResponse</span><span class="o">&gt;&gt;</span> <span class="n">routing_reader_</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">cyber</span><span class="o">::</span><span class="n">Reader</span><span class="o">&lt;</span><span class="n">planning</span><span class="o">::</span><span class="n">PadMessage</span><span class="o">&gt;&gt;</span> <span class="n">pad_msg_reader_</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">cyber</span><span class="o">::</span><span class="n">Reader</span><span class="o">&lt;</span><span class="n">relative_map</span><span class="o">::</span><span class="n">MapMsg</span><span class="o">&gt;&gt;</span> <span class="n">relative_map_reader_</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">cyber</span><span class="o">::</span><span class="n">Reader</span><span class="o">&lt;</span><span class="n">storytelling</span><span class="o">::</span><span class="n">Stories</span><span class="o">&gt;&gt;</span> <span class="n">story_telling_reader_</span><span class="p">;</span>

  <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">cyber</span><span class="o">::</span><span class="n">Writer</span><span class="o">&lt;</span><span class="n">ADCTrajectory</span><span class="o">&gt;&gt;</span> <span class="n">planning_writer_</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">cyber</span><span class="o">::</span><span class="n">Writer</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">RoutingRequest</span><span class="o">&gt;&gt;</span> <span class="n">rerouting_writer_</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">cyber</span><span class="o">::</span><span class="n">Writer</span><span class="o">&lt;</span><span class="n">PlanningLearningData</span><span class="o">&gt;&gt;</span>
      <span class="n">planning_learning_data_writer_</span><span class="p">;</span>
<span class="cm">/*   ....   */</span>
 <span class="c1">// ä¸ Reader ä¸€ä¸€å¯¹åº”çš„ç§æœ‰å˜é‡</span>
  <span class="n">perception</span><span class="o">::</span><span class="n">TrafficLightDetection</span> <span class="n">traffic_light_</span><span class="p">;</span>
  <span class="n">routing</span><span class="o">::</span><span class="n">RoutingResponse</span> <span class="n">routing_</span><span class="p">;</span>
  <span class="n">planning</span><span class="o">::</span><span class="n">PadMessage</span> <span class="n">pad_msg_</span><span class="p">;</span>
  <span class="n">relative_map</span><span class="o">::</span><span class="n">MapMsg</span> <span class="n">relative_map_</span><span class="p">;</span>
  <span class="n">storytelling</span><span class="o">::</span><span class="n">Stories</span> <span class="n">stories_</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<p>æˆ‘ä»¬ä¸€æ¡æ¡åœ°çœ‹ï¼Œ<code class="language-plaintext highlighter-rouge">PlanningComponent</code> ç±»ç»§æ‰¿çš„æ˜¯ <code class="language-plaintext highlighter-rouge">Component&lt;prediction::PredictionObstacles, canbus::Chassis,  localization::LocalizationEstimate&gt;</code> ç±»ï¼Œç®€å•åœ°è¯´ï¼Œä»åå­—ä¸Šçœ‹ï¼Œ<code class="language-plaintext highlighter-rouge">PlanningComponent</code> ç±»éœ€è¦å¤„ç†ä¸‰ç±»æ¶ˆæ¯ï¼š</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">prediction::PredictionObstacles</code> é¢„æµ‹çš„éšœç¢ç‰©è¡Œä¸º</li>
  <li>
<code class="language-plaintext highlighter-rouge">canbus::Chassis</code>  canbus æ€»çº¿ä¼ æ¥çš„åº•ç›˜çŠ¶æ€</li>
  <li>
<code class="language-plaintext highlighter-rouge">localization::LocalizationEstimate</code> æ¥è‡ªå®šä½æ¨¡å—çš„å®šä½ä¿¡æ¯</li>
</ul>

<p>ä½†æ˜¯ï¼Œ<code class="language-plaintext highlighter-rouge">PlanningComponent</code> ç±»å†…éƒ¨æœ‰éå¸¸å¤šçš„ä¸åŒç±»å‹çš„è®¢é˜…è€… <code class="language-plaintext highlighter-rouge">Reader</code> å’Œå‘å¸ƒè€… <code class="language-plaintext highlighter-rouge">Writer</code> ã€‚è¿™äº›è®¢é˜…è€…å’Œå‘å¸ƒè€…çš„ç”¨é€”ï¼Œå¤§éƒ½å¯ä»¥é€šè¿‡åç§°çŒœå‡ºä¸ªå¤§æ¦‚ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç±»çš„æˆå‘˜å˜é‡ä¸­ï¼Œå­˜åœ¨ä¸ <code class="language-plaintext highlighter-rouge">Reader</code> ä¸€ä¸€å¯¹åº”çš„å˜é‡ï¼Œçœ‹èµ·æ¥å®ƒä»¬æ˜¯ç”¨äºå­˜æ”¾å¯¹åº”çš„ <code class="language-plaintext highlighter-rouge">Reader</code> æ¥æ”¶çš„æ¶ˆæ¯ï¼Œå¾ˆå¿«ä¸‹æ–‡å°±è¯å®äº†æˆ‘çš„çŒœæƒ³<img class="emoji" title=":smiley:" alt=":smiley:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png" height="20" width="20">ã€‚</p>

<p><span id="Init"></span></p>

<h3 id="åˆå§‹åŒ–">åˆå§‹åŒ–</h3>

<p><code class="language-plaintext highlighter-rouge">Init()</code> å‡½æ•°å®ç°äº†æ¨¡å—åˆå§‹åŒ–ï¼Œåœ¨ <code class="language-plaintext highlighter-rouge">modules/</code> ä¸­çš„ä»£ç ä¸è®ºå–åã€ç±»å‹è¿˜æ˜¯å‡½æ•°å®ç°éƒ½éå¸¸é•¿ï¼Œè¿™ç‚¹ä¸åŒäº Cyber RTï¼Œå› æ­¤åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘é€‰æ‹©éƒ¨åˆ†æˆªå–ä»£ç ï¼Œå¦‚æœæƒ³è¦çœ‹å®Œæ•´çš„ä»£ç ï¼Œç§»æ­¥ <code class="language-plaintext highlighter-rouge">modules/planning/planning_component.cc::Init()</code> ã€‚</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">injector_</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">DependencyInjector</span><span class="o">&gt;</span><span class="p">();</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">FLAGS_use_navigation_mode</span><span class="p">)</span>
    <span class="n">planning_base_</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">NaviPlanning</span><span class="o">&gt;</span><span class="p">(</span><span class="n">injector_</span><span class="p">);</span>
  <span class="k">else</span>
    <span class="n">planning_base_</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">OnLanePlanning</span><span class="o">&gt;</span><span class="p">(</span><span class="n">injector_</span><span class="p">);</span>

  <span class="n">ACHECK</span><span class="p">(</span><span class="n">ComponentBase</span><span class="o">::</span><span class="n">GetProtoConfig</span><span class="p">(</span><span class="o">&amp;</span><span class="n">config_</span><span class="p">))</span>
      <span class="o">&lt;&lt;</span> <span class="s">"failed to load planning config file "</span>
      <span class="o">&lt;&lt;</span> <span class="n">ComponentBase</span><span class="o">::</span><span class="n">ConfigFilePath</span><span class="p">();</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">FLAGS_planning_offline_learning</span> <span class="o">||</span>
      <span class="n">config_</span><span class="p">.</span><span class="n">learning_mode</span><span class="p">()</span> <span class="o">!=</span> <span class="n">PlanningConfig</span><span class="o">::</span><span class="n">NO_LEARNING</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">message_process_</span><span class="p">.</span><span class="n">Init</span><span class="p">(</span><span class="n">config_</span><span class="p">,</span> <span class="n">injector_</span><span class="p">))</span>
      <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>

  <span class="n">planning_base_</span><span class="o">-&gt;</span><span class="n">Init</span><span class="p">(</span><span class="n">config_</span><span class="p">);</span>
</code></pre></div></div>

<p>ä¸Šé¢ä»£ç é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª <code class="language-plaintext highlighter-rouge">DependencyInjector</code> ç±»çš„æŒ‡é’ˆï¼Œç„¶åæ ¹æ® <code class="language-plaintext highlighter-rouge">FLAGS_use_navigation_mode</code> æ¨¡å¼çš„ä¸åŒï¼Œé€‰æ‹©åˆ›å»ºä¸åŒçš„ <code class="language-plaintext highlighter-rouge">PlanningBase</code> çš„å­ç±»ï¼Œç„¶åå°±æ˜¯è¯»å–é…ç½®æ–‡ä»¶è·¯å¾„ï¼Œå†å°±æ˜¯ <code class="language-plaintext highlighter-rouge">PlanningBase</code> å­ç±»çš„åˆå§‹åŒ–ã€‚å…ˆæ¥è¯´è¯´è¿™äº›è§„åˆ’å­ç±»çš„åŒºåˆ«ã€‚</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">OpenSpacePlanning</code>  ä¸»è¦çš„åº”ç”¨åœºæ™¯æ˜¯è‡ªä¸»æ³Šè½¦å’Œç‹­çª„è·¯æ®µçš„æ‰å¤´ï¼Œ<a href="https://github.com/ApolloAuto/apollo/blob/master/docs/specs/Open_Space_Planner.md">å®˜æ–¹æ–‡æ¡£å‚è€ƒ</a>ï¼Œä½†å¾ˆå¥‡æ€ªçš„æ˜¯ï¼Œæˆ‘æ²¡æœ‰æ‰¾åˆ°ç›¸åº”çš„å®ç°ä»£ç <img class="emoji" title=":confused:" alt=":confused:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f615.png" height="20" width="20">
</li>
  <li>
<code class="language-plaintext highlighter-rouge">NaviPlanning</code>   ä¸»è¦ç”¨äºåœ¨ç¡®å®šäº†å¯¼èˆªè·¯çº¿çš„æƒ…å†µä¸‹çš„è‡ªåŠ¨é©¾é©¶</li>
  <li>
<code class="language-plaintext highlighter-rouge">OnLanePlanning</code>   ä¸»è¦çš„åº”ç”¨äºå¼€æ”¾é“è·¯ä¸‹æ²¿è½¦é“çº¿çš„è‡ªåŠ¨é©¾é©¶ã€‚</li>
</ul>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">routing_reader_</span> <span class="o">=</span> <span class="n">node_</span><span class="o">-&gt;</span><span class="n">CreateReader</span><span class="o">&lt;</span><span class="n">RoutingResponse</span><span class="o">&gt;</span><span class="p">(</span>
      <span class="n">config_</span><span class="p">.</span><span class="n">topic_config</span><span class="p">().</span><span class="n">routing_response_topic</span><span class="p">(),</span>
      <span class="p">[</span><span class="k">this</span><span class="p">](</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">RoutingResponse</span><span class="o">&gt;&amp;</span> <span class="n">routing</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">AINFO</span> <span class="o">&lt;&lt;</span> <span class="s">"Received routing data: run routing callback."</span>
              <span class="o">&lt;&lt;</span> <span class="n">routing</span><span class="o">-&gt;</span><span class="n">header</span><span class="p">().</span><span class="n">DebugString</span><span class="p">();</span>
        <span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span> <span class="n">lock</span><span class="p">(</span><span class="n">mutex_</span><span class="p">);</span>
        <span class="n">routing_</span><span class="p">.</span><span class="n">CopyFrom</span><span class="p">(</span><span class="o">*</span><span class="n">routing</span><span class="p">);</span>
      <span class="p">});</span>
<span class="c1">// æ¥ä¸‹æ¥å‡ ä¸ª Reader ç±»ä¼¼çš„å†™æ³•</span>
  <span class="n">planning_writer_</span> <span class="o">=</span> <span class="n">node_</span><span class="o">-&gt;</span><span class="n">CreateWriter</span><span class="o">&lt;</span><span class="n">ADCTrajectory</span><span class="o">&gt;</span><span class="p">(</span>
      <span class="n">config_</span><span class="p">.</span><span class="n">topic_config</span><span class="p">().</span><span class="n">planning_trajectory_topic</span><span class="p">());</span>
<span class="c1">// æ¥ä¸‹æ¥çš„ Writer ç±»ä¼¼çš„å†™æ³•</span>
</code></pre></div></div>

<p>ç´§æ¥ç€ï¼Œ<code class="language-plaintext highlighter-rouge">Init()</code> å‡½æ•°å°±ç”¨<a href="https://dingfen.github.io/apollo/2020/11/03/CyberCommu1.html">æˆ‘ä¹‹å‰åšæ–‡ä¸­ä»‹ç»çš„æ–¹å¼</a>åˆ›å»ºè®¢é˜…è€… <code class="language-plaintext highlighter-rouge">Reader</code> å’Œå‘å¸ƒè€… <code class="language-plaintext highlighter-rouge">Writer</code> ã€‚ä»”ç»†çœ‹ä¸Šé¢ç»™å‡ºçš„ä»£ç ï¼Œ<code class="language-plaintext highlighter-rouge">CreateReader</code> å‡½æ•°çš„å‚æ•°ï¼Œä¸€ä¸ªæ˜¯ä»é…ç½®æ–‡ä»¶ä¸­å–å¾—ç›¸åº”çš„é…ç½®ä¿¡æ¯ï¼Œå¦ä¸€ä¸ªæ˜¯æ„å»ºçš„å›è°ƒå‡½æ•°ã€‚</p>

<p>å’±ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹åè€…ï¼šæ„å»ºå‡½æ•°ã€‚æ ¹æ®æˆ‘åœ¨<a href="https://dingfen.github.io/apollo/2020/11/07/CyberCommu2.html">è¿™ç¯‡åšå®¢ä¸­æ‰€è®²çš„æµç¨‹</a>ï¼Œä¼ å…¥çš„å›è°ƒå‡½æ•°æ˜¯åœ¨ <code class="language-plaintext highlighter-rouge">Reader</code> æ¥æ”¶åˆ°æ¶ˆæ¯åå°±ä¼šè¢«è°ƒç”¨çš„ï¼Œä»å†…å®¹æ¥çœ‹ï¼Œ<code class="language-plaintext highlighter-rouge">Reader</code> åœ¨æ”¶åˆ°å¯¹åº”çš„æ¶ˆæ¯åï¼Œè°ƒç”¨ <code class="language-plaintext highlighter-rouge">CopyFrom()</code> å‡½æ•°ï¼ŒæŠŠæ¶ˆæ¯æ‹·è´åˆ°è‡ªå·±çš„ç§æœ‰å˜é‡ä¸­ã€‚è‡³äº <code class="language-plaintext highlighter-rouge">Writer</code> å°±æ¯”è¾ƒå¹³å‡¡äº†ï¼Œå°±æ˜¯è·å–äº†é…ç½®æ–‡ä»¶é‡Œç›¸åº”çš„ä¿¡æ¯<img class="emoji" title=":man_shrugging:" alt=":man_shrugging:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f937-2642.png" height="20" width="20">ã€‚</p>

<p>é‚£ä¹ˆè¿™ä¸ªâ€œé…ç½®æ–‡ä»¶ä¸­çš„ç›¸åº”ä¿¡æ¯â€åˆ°åº•æ˜¯ä»€ä¹ˆä¿¡æ¯å‘¢<img class="emoji" title=":confused:" alt=":confused:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f615.png" height="20" width="20">ï¼Ÿæ‰“å¼€ <code class="language-plaintext highlighter-rouge">modules/planning/conf/planning_config.pb.txt</code>ï¼Œä½ å°±ä¼šæç„¶å¤§æ‚Ÿ<img class="emoji" title=":point_down:" alt=":point_down:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f447.png" height="20" width="20">ï¼ŒåŸæ¥ä¸Šé¢ä»£ç ä¸­çš„ <code class="language-plaintext highlighter-rouge">config_.topic_config().planning_trajectory_topic()</code>  å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯¹åº”çš„å°±æ˜¯ä¿¡é“çš„åå­—ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>topic_config {
  chassis_topic: "/apollo/canbus/chassis"
  hmi_status_topic: "/apollo/hmi/status"
  localization_topic: "/apollo/localization/pose"
  planning_pad_topic: "/apollo/planning/pad"
  planning_trajectory_topic: "/apollo/planning"
  prediction_topic: "/apollo/prediction"
  relative_map_topic: "/apollo/relative_map"
  routing_request_topic: "/apollo/routing_request"
  routing_response_topic: "/apollo/routing_response"
  story_telling_topic: "/apollo/storytelling"
  traffic_light_detection_topic: "/apollo/perception/traffic_light"
  planning_learning_data_topic: "/apollo/planning/learning_data"
}
</code></pre></div></div>

<p>è¿™å°±æ˜¯åˆå§‹åŒ–å‡½æ•°çš„å…¨éƒ¨å†…å®¹äº†ã€‚</p>

<h3 id="å¤„ç†">å¤„ç†</h3>

<p>å†æ¥çœ‹ <code class="language-plaintext highlighter-rouge">PlanningComponent::Proc()</code> å‡½æ•°ï¼Œä¹‹å‰çš„åšå®¢ä¸­æˆ‘è¯´è¿‡ï¼Œ<code class="language-plaintext highlighter-rouge">Proc()</code> å‡½æ•°æ˜¯å¯ä»¥ç”±ç”¨æˆ·è‡ªå·±ç¼–å†™å®Œæˆçš„ï¼Œè€Œä¹‹åï¼Œè¯¥å‡½æ•°ä¼šè¢«å°è£…å¤„ç†ï¼Œæœ€ç»ˆè®©å¯¹åº”çš„åç¨‹å¼€å§‹æ‰§è¡Œã€‚ä¸åŒäºåœ¨ Cyber RT ä¸­çš„ç²¾é›•ç»†ç¢ï¼Œæˆ‘è¿™æ¬¡é‡‡ç”¨ä¸åŒçš„åŠæ³•ï¼Œå…ˆå¿«é€Ÿè¿‡ä¸€é <code class="language-plaintext highlighter-rouge">Proc()</code> å‡½æ•°ï¼Œç„¶åæ‰¾å‡ºè‡ªå·±æ„Ÿå…´è¶£çš„ï¼Œè¿›è€Œæ·±å…¥ç ”ç©¶ã€‚é‚£ä¹ˆå…ˆæ¥çœ‹ <code class="language-plaintext highlighter-rouge">Proc()</code> å‡½æ•°çš„ç¬¬ä¸€éƒ¨åˆ†ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// å‡½æ•°å¤´å‰é¢å·²ç»ç»™å‡ºäº† è¿™é‡Œå°±ä¸æ”¾äº† å¹¶å»æ‰äº†ä¸€äº›é”™è¯¯è¯Šæ–­è¯­å¥</span>
<span class="c1">// check and process possible rerouting request</span>
  <span class="n">CheckRerouting</span><span class="p">();</span>

<span class="c1">// process fused input data</span>
  <span class="n">local_view_</span><span class="p">.</span><span class="n">prediction_obstacles</span> <span class="o">=</span> <span class="n">prediction_obstacles</span><span class="p">;</span>
  <span class="n">local_view_</span><span class="p">.</span><span class="n">chassis</span> <span class="o">=</span> <span class="n">chassis</span><span class="p">;</span>
  <span class="n">local_view_</span><span class="p">.</span><span class="n">localization_estimate</span> <span class="o">=</span> <span class="n">localization_estimate</span><span class="p">;</span>
  <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span> <span class="n">lock</span><span class="p">(</span><span class="n">mutex_</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">local_view_</span><span class="p">.</span><span class="n">routing</span> <span class="o">||</span>
        <span class="n">hdmap</span><span class="o">::</span><span class="n">PncMap</span><span class="o">::</span><span class="n">IsNewRouting</span><span class="p">(</span><span class="o">*</span><span class="n">local_view_</span><span class="p">.</span><span class="n">routing</span><span class="p">,</span> <span class="n">routing_</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">local_view_</span><span class="p">.</span><span class="n">routing</span> <span class="o">=</span>
          <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">RoutingResponse</span><span class="o">&gt;</span><span class="p">(</span><span class="n">routing_</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span> <span class="n">lock</span><span class="p">(</span><span class="n">mutex_</span><span class="p">);</span>
    <span class="n">local_view_</span><span class="p">.</span><span class="n">traffic_light</span> <span class="o">=</span>
        <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">TrafficLightDetection</span><span class="o">&gt;</span><span class="p">(</span><span class="n">traffic_light_</span><span class="p">);</span>
    <span class="n">local_view_</span><span class="p">.</span><span class="n">relative_map</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">MapMsg</span><span class="o">&gt;</span><span class="p">(</span><span class="n">relative_map_</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span> <span class="n">lock</span><span class="p">(</span><span class="n">mutex_</span><span class="p">);</span>
    <span class="n">local_view_</span><span class="p">.</span><span class="n">pad_msg</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">PadMessage</span><span class="o">&gt;</span><span class="p">(</span><span class="n">pad_msg_</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span> <span class="n">lock</span><span class="p">(</span><span class="n">mutex_</span><span class="p">);</span>
    <span class="n">local_view_</span><span class="p">.</span><span class="n">stories</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="n">Stories</span><span class="o">&gt;</span><span class="p">(</span><span class="n">stories_</span><span class="p">);</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>é¦–å…ˆï¼Œ<code class="language-plaintext highlighter-rouge">Proc()</code> å‡½æ•°è°ƒç”¨ <code class="language-plaintext highlighter-rouge">CheckRerouting()</code> æ£€æŸ¥å¹¶å¤„ç†äº†å¯èƒ½çš„é‡æ–°è·¯ç”±éœ€æ±‚ï¼Œç„¶åå°±æ˜¯æ„å»ºè‡ªå·±å¯¹è±¡å†…çš„æˆå‘˜ <code class="language-plaintext highlighter-rouge">local_view_</code> ï¼Œæ²¡é”™ï¼Œä¸ºäº†é˜²æ­¢å¤šçº¿ç¨‹ç«äº‰ï¼Œä½¿ç”¨äº†éå¸¸å¤šæ¬¡çš„äº’æ–¥é”<img class="emoji" title=":lock:" alt=":lock:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f512.png" height="20" width="20"> ã€‚è¯¥æˆå‘˜å˜é‡åŒ…å«äº†æ‰€æœ‰è§„åˆ’æ¨¡å—éœ€è¦çš„è¾“å…¥ï¼Œè¿™äº›è¾“å…¥ä¿¡æ¯éå¸¸é‡è¦ï¼Œå¯èƒ½ä¼šç»å¸¸ä½¿ç”¨ï¼Œè¯¦ç»†æƒ…å†µåœ¨ä¸‹æ–‡çš„<a href="#input">è¾“å…¥</a>éƒ¨åˆ†ã€‚</p>

<p>æˆ‘ä»¬å…ˆæŠŠè¯¸å¤šç–‘é—®æŠ›ç½®è„‘åï¼Œç›´æ¥æ¥çœ‹ <code class="language-plaintext highlighter-rouge">Proc()</code> å‡½æ•°çš„ç¬¬äºŒéƒ¨åˆ†ã€‚</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">if</span> <span class="p">(</span><span class="n">config_</span><span class="p">.</span><span class="n">learning_mode</span><span class="p">()</span> <span class="o">!=</span> <span class="n">PlanningConfig</span><span class="o">::</span><span class="n">NO_LEARNING</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// data process for online training</span>
    <span class="n">message_process_</span><span class="p">.</span><span class="n">OnChassis</span><span class="p">(</span><span class="o">*</span><span class="n">local_view_</span><span class="p">.</span><span class="n">chassis</span><span class="p">);</span>
    <span class="n">message_process_</span><span class="p">.</span><span class="n">OnPrediction</span><span class="p">(</span><span class="o">*</span><span class="n">local_view_</span><span class="p">.</span><span class="n">prediction_obstacles</span><span class="p">);</span>
    <span class="n">message_process_</span><span class="p">.</span><span class="n">OnRoutingResponse</span><span class="p">(</span><span class="o">*</span><span class="n">local_view_</span><span class="p">.</span><span class="n">routing</span><span class="p">);</span>
    <span class="n">message_process_</span><span class="p">.</span><span class="n">OnStoryTelling</span><span class="p">(</span><span class="o">*</span><span class="n">local_view_</span><span class="p">.</span><span class="n">stories</span><span class="p">);</span>
    <span class="n">message_process_</span><span class="p">.</span><span class="n">OnTrafficLightDetection</span><span class="p">(</span><span class="o">*</span><span class="n">local_view_</span><span class="p">.</span><span class="n">traffic_light</span><span class="p">);</span>
    <span class="n">message_process_</span><span class="p">.</span><span class="n">OnLocalization</span><span class="p">(</span><span class="o">*</span><span class="n">local_view_</span><span class="p">.</span><span class="n">localization_estimate</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="c1">// publish learning data frame for RL test</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">config_</span><span class="p">.</span><span class="n">learning_mode</span><span class="p">()</span> <span class="o">==</span> <span class="n">PlanningConfig</span><span class="o">::</span><span class="n">RL_TEST</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">PlanningLearningData</span> <span class="n">planning_learning_data</span><span class="p">;</span>
    <span class="n">LearningDataFrame</span><span class="o">*</span> <span class="n">learning_data_frame</span> <span class="o">=</span>
        <span class="n">injector_</span><span class="o">-&gt;</span><span class="n">learning_based_data</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">GetLatestLearningDataFrame</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">learning_data_frame</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">planning_learning_data</span><span class="p">.</span><span class="n">mutable_learning_data_frame</span><span class="p">()</span>
                            <span class="o">-&gt;</span><span class="n">CopyFrom</span><span class="p">(</span><span class="o">*</span><span class="n">learning_data_frame</span><span class="p">);</span>
      <span class="n">common</span><span class="o">::</span><span class="n">util</span><span class="o">::</span><span class="n">FillHeader</span><span class="p">(</span><span class="n">node_</span><span class="o">-&gt;</span><span class="n">Name</span><span class="p">(),</span> <span class="o">&amp;</span><span class="n">planning_learning_data</span><span class="p">);</span>
      <span class="n">planning_learning_data_writer_</span><span class="o">-&gt;</span><span class="n">Write</span><span class="p">(</span><span class="n">planning_learning_data</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="n">AERROR</span> <span class="o">&lt;&lt;</span> <span class="s">"fail to generate learning data frame"</span><span class="p">;</span>
      <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre></div></div>

<p>ä»æ³¨é‡Šä¸­çœ‹å‡ºï¼Œ<code class="language-plaintext highlighter-rouge">MessageProcess</code> ç±»æœ‰ç”¨äºçº¿ä¸Šè®­ç»ƒçš„åŠŸèƒ½ï¼Œåœ¨ <code class="language-plaintext highlighter-rouge">learning_mode</code> æ‰“å¼€æ—¶ï¼Œå®ƒä¼šæ”¶é›†åˆšåˆšè¾“å…¥å¾—åˆ°ä¿¡æ¯ã€‚ä¹‹åï¼Œ<code class="language-plaintext highlighter-rouge">injector_</code> è·å¾—æœ€æ–°çš„å­¦ä¹ æ•°æ®å¸§ï¼ˆframeï¼‰ï¼Œå¹¶é€šè¿‡ <code class="language-plaintext highlighter-rouge">planning_learning_data_writer_</code> å‘å¸ƒè€…å‘å¸ƒï¼Œç”¨äºå¼ºåŒ–å­¦ä¹ ï¼ˆReinforcement Learningï¼‰æµ‹è¯•ã€‚</p>

<p>åŒæ ·ï¼Œè·³è¿‡å­¦ä¹ éƒ¨åˆ†ï¼ˆè¿™ä¸æ˜¯æˆ‘æ‰€å…³å¿ƒçš„é‡ç‚¹ï¼‰ï¼Œå†æ¥çœ‹ç¬¬ä¸‰éƒ¨åˆ†ä»£ç ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">ADCTrajectory</span> <span class="n">adc_trajectory_pb</span><span class="p">;</span>
  <span class="n">planning_base_</span><span class="o">-&gt;</span><span class="n">RunOnce</span><span class="p">(</span><span class="n">local_view_</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">adc_trajectory_pb</span><span class="p">);</span>
  <span class="n">common</span><span class="o">::</span><span class="n">util</span><span class="o">::</span><span class="n">FillHeader</span><span class="p">(</span><span class="n">node_</span><span class="o">-&gt;</span><span class="n">Name</span><span class="p">(),</span> <span class="o">&amp;</span><span class="n">adc_trajectory_pb</span><span class="p">);</span>

  <span class="c1">// modify trajectory relative time due to the timestamp change in header</span>
  <span class="k">auto</span> <span class="n">start_time</span> <span class="o">=</span> <span class="n">adc_trajectory_pb</span><span class="p">.</span><span class="n">header</span><span class="p">().</span><span class="n">timestamp_sec</span><span class="p">();</span>
  <span class="k">const</span> <span class="kt">double</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">start_time</span> <span class="o">-</span> <span class="n">adc_trajectory_pb</span><span class="p">.</span><span class="n">header</span><span class="p">().</span><span class="n">timestamp_sec</span><span class="p">();</span>
  <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">p</span> <span class="o">:</span> <span class="o">*</span><span class="n">adc_trajectory_pb</span><span class="p">.</span><span class="n">mutable_trajectory_point</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">p</span><span class="p">.</span><span class="n">set_relative_time</span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">relative_time</span><span class="p">()</span> <span class="o">+</span> <span class="n">dt</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="n">planning_writer_</span><span class="o">-&gt;</span><span class="n">Write</span><span class="p">(</span><span class="n">adc_trajectory_pb</span><span class="p">);</span>

  <span class="c1">// record in history</span>
  <span class="k">auto</span><span class="o">*</span> <span class="n">history</span> <span class="o">=</span> <span class="n">injector_</span><span class="o">-&gt;</span><span class="n">history</span><span class="p">();</span>
  <span class="n">history</span><span class="o">-&gt;</span><span class="n">Add</span><span class="p">(</span><span class="n">adc_trajectory_pb</span><span class="p">);</span>

  <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
</code></pre></div></div>

<p>åœ¨ç¬¬ä¸‰éƒ¨åˆ†ä»£ç ä¸­ï¼Œé¦–å…ˆè°ƒç”¨ <code class="language-plaintext highlighter-rouge">RunOnce()</code> å‡½æ•°ç”Ÿæˆäº†è‡ªåŠ¨é©¾é©¶è½¨è¿¹ï¼Œæ”¾åœ¨äº† <code class="language-plaintext highlighter-rouge">ADCTrajectory</code> ç±»çš„æ¶ˆæ¯ä¸­ï¼Œçœ‹æ¥è¿™å°±æ˜¯ç”Ÿäº§è§„åˆ’è·¯å¾„çš„å…³é”®é€»è¾‘ï¼Œè¿™æ˜¯æˆ‘æ¯”è¾ƒå…³å¿ƒçš„ã€‚ç„¶åï¼Œæ ¹æ®æ³¨é‡Šï¼Œæˆ‘æ¨æ–­ï¼Œç¨‹åºä¿®æ”¹äº†è½¨è¿¹ä¸­æ‰€æœ‰ç‚¹çš„ç›¸å¯¹æ—¶é—´ï¼Œå¹¶é€šè¿‡å‘å¸ƒè€… <code class="language-plaintext highlighter-rouge">planning_writer_</code> å‘é€æ¶ˆæ¯ï¼Œæœ€åè¿›è¡Œå†å²è®°å½•ã€‚è‡³æ­¤ï¼Œ<code class="language-plaintext highlighter-rouge">PlanningComponent::Proc()</code> å‡½æ•°ç»“æŸã€‚</p>

<p><span id="input"></span></p>
<h3 id="è¾“å…¥æ•°æ®">è¾“å…¥æ•°æ®</h3>

<p>å‰æ–‡è¯´åˆ°ï¼Œ<code class="language-plaintext highlighter-rouge">Proc()</code> å‡½æ•°å…ˆæ£€æŸ¥è·¯ç”±æƒ…å†µï¼Œå†æ”¶é›†è¾“å…¥æ•°æ®åˆ° <code class="language-plaintext highlighter-rouge">local_view_</code> è¿™ä¸ªç§æœ‰å˜é‡ä¸­ã€‚ä¸ºäº†å¼„æ¸…æ¨¡å—çš„è¾“å…¥è¾“å‡ºä¿¡æ¯ï¼Œè¿›è€Œäº†è§£æ•´ä¸ª Apollo ç³»ç»Ÿçš„æ•°æ®æµé€šæƒ…å†µï¼Œæˆ‘éœ€è¦å¯¹è¾“å…¥æ•°æ®åšä¸€ä¸ªå…¨é¢çš„è§£è¯»ã€‚</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">struct</span> <span class="nc">LocalView</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">prediction</span><span class="o">::</span><span class="n">PredictionObstacles</span><span class="o">&gt;</span> <span class="n">prediction_obstacles</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">canbus</span><span class="o">::</span><span class="n">Chassis</span><span class="o">&gt;</span> <span class="n">chassis</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">localization</span><span class="o">::</span><span class="n">LocalizationEstimate</span><span class="o">&gt;</span> <span class="n">localization_estimate</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">perception</span><span class="o">::</span><span class="n">TrafficLightDetection</span><span class="o">&gt;</span> <span class="n">traffic_light</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">routing</span><span class="o">::</span><span class="n">RoutingResponse</span><span class="o">&gt;</span> <span class="n">routing</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">relative_map</span><span class="o">::</span><span class="n">MapMsg</span><span class="o">&gt;</span> <span class="n">relative_map</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">PadMessage</span><span class="o">&gt;</span> <span class="n">pad_msg</span><span class="p">;</span>
  <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">storytelling</span><span class="o">::</span><span class="n">Stories</span><span class="o">&gt;</span> <span class="n">stories</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div>

<ul>
  <li>prediction_obstacles ä»ä¿¡é“ä¸­è·å¾—çš„æŒ‡é’ˆï¼Œç±»å‹ä¸º <code class="language-plaintext highlighter-rouge">PredictionObstacles</code>ï¼Œä»£ç æ–‡ä»¶åœ¨ <code class="language-plaintext highlighter-rouge">modules/prediction/proto/prediction_obstacle.proto</code> ä¸­ï¼Œè¯¥ç±»å‹çš„æ¶ˆæ¯æ¥è‡ª<strong>é¢„æµ‹æ¨¡å—</strong>ï¼ŒåŒ…å«äº†ä»¥ä¸‹ä¿¡æ¯ï¼š
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">Header</code> å¤´ç»“æ„ï¼šåŒ…å«äº†è¿™æ¡æ¶ˆæ¯<strong>å‘å¸ƒçš„æ—¶åˆ»</strong>ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ï¼Œç›®å‰ä½ç½®çš„æ¨¡å—åï¼Œè¯¥æ¶ˆæ¯çš„åºåˆ—å·ï¼ˆæ¯ä¸ªæ¨¡å—å„è‡ªç»´æŠ¤çš„ï¼‰ç­‰ï¼Œå‡ ä¹æ¯ä¸ªæ¶ˆæ¯éƒ½åŒ…å«æœ‰è¿™ä¸ªå¤´ç»“æ„ï¼Œä¸‹é¢å°±ä¸æåŠäº†ã€‚</li>
      <li>
<code class="language-plaintext highlighter-rouge">PredictionObstacle</code> é¢„æµ‹æ¨¡å—ä¸­çš„è‹¥å¹²ä¸ªéšœç¢ç‰©è¡Œä¸ºï¼šæœ‰æ„ŸçŸ¥æ¨¡å—ä¸­çš„éšœç¢ç‰©ï¼ˆ<code class="language-plaintext highlighter-rouge">PerceptionObstacle</code>ï¼‰ï¼Œå®ƒåŒ…æ‹¬éšœç¢ç‰©çš„ idï¼Œå®ƒçš„ä¸‰ç»´åæ ‡ã€é€Ÿåº¦åŠ é€Ÿåº¦ã€è¾¹ç•Œå¤§å°ï¼ˆé•¿é«˜å®½ï¼‰ã€ç‰¹æ®Šçš„å½¢çŠ¶ã€ç±»å‹ï¼ˆè¡Œäººã€éæœºåŠ¨è½¦ã€æœºåŠ¨è½¦ï¼‰ã€è¿åŠ¨è½¨è¿¹ç­‰ï¼›è¿˜æœ‰æ—¶é—´æˆ³ï¼Œè®°å½• GPS ç»™å‡ºçš„æ—¶åˆ»ï¼›è¿˜æœ‰é¢„æµ‹çš„æ—¶é—´é•¿åº¦ï¼›å¤šç§å¯èƒ½çš„è¿åŠ¨è½¨è¿¹ï¼›éšœç¢ç‰©çš„è¿åŠ¨è¶‹åŠ¿ã€ä¼˜å…ˆçº§ç­‰ã€‚</li>
      <li>å¼€å§‹çš„æ—¶é—´æˆ³ï¼šè®°å½•é¢„æµ‹å¼€å§‹çš„æ—¶åˆ»</li>
      <li>ç»“æŸæ—¶é—´æˆ³ï¼šé¢„æµ‹ç»“æŸçš„æ—¶åˆ»</li>
      <li>è‡ªåŠ¨é©¾é©¶è½¦è¾†çš„è¿åŠ¨è¶‹åŠ¿ï¼Œåœæ­¢ã€æ­£å¸¸è¡Œé©¶è¿˜æ˜¯æ­£åœ¨å˜é“ç­‰</li>
      <li>
<code class="language-plaintext highlighter-rouge">Scenery</code>  ç°åœ¨çš„åœºæ™¯</li>
    </ul>
  </li>
  <li>chassis ä»ä¿¡é“è·å¾—çš„æŒ‡é’ˆï¼Œç±»å‹ä¸º <code class="language-plaintext highlighter-rouge">Chassis</code>ï¼Œè¿™æ¡æ¶ˆæ¯ç›´æ¥æ¥è‡ª<strong>æ€»çº¿ CanBus</strong>ï¼Œä»£ç æ–‡ä»¶åœ¨ <code class="language-plaintext highlighter-rouge">modules/canbus/proto/chassis.proto</code> ä¸­ï¼Œè¯¥ç±»åŒ…å«äº†å¾ˆå¤šä¿¡æ¯ï¼Œä¸»è¦æ˜¯æ±½è½¦åº•ç›˜æ‰€ç»™å‡ºçš„æœºæ¢°çŠ¶æ€ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼š
    <ul>
      <li>é©¾é©¶æ¨¡å¼ï¼Œæœ‰æ‰‹åŠ¨é©¾é©¶ã€è‡ªåŠ¨é©¾é©¶ã€ä»…æ§åˆ¶æ–¹å‘ã€ä»…æ§åˆ¶é€Ÿåº¦ä»¥åŠç´§æ€¥æ¨¡å¼</li>
      <li>æ¡£ä½æƒ…å†µã€å¼•æ“è½¬é€Ÿã€è½¦è¾†é€Ÿåº¦ã€é‡Œç¨‹è¡¨ã€ç‡ƒæ²¹æƒ…å†µã€ç”µæ± ç”µé‡ç­‰</li>
      <li>åˆ¹è½¦ã€æ²¹é—¨è¸æ¿çš„åŠ›åº¦ï¼Œæ–¹å‘ç›˜çš„æ—‹è½¬è§’åº¦ï¼Œè½¦è½®è½¬é€Ÿ</li>
      <li>è½¬å‘ç¯ã€é›¾ç¯ã€å¤§ç¯çš„å·¥ä½œæƒ…å†µ</li>
    </ul>
  </li>
  <li>localization_estimate ä»ä¿¡é“ä¸­è·å¾—çš„æŒ‡é’ˆï¼Œç±»å‹ä¸º <code class="language-plaintext highlighter-rouge">LocalizationEstimate</code>ï¼Œä»£ç æ–‡ä»¶åœ¨ <code class="language-plaintext highlighter-rouge">modules/localization/proto/localization.proto</code> ä¸­ï¼Œè¿™æ¡æ¶ˆæ¯æ¥è‡ª<strong>å®šä½æ¨¡å—</strong>ï¼Œè¯¥ç±»ä¸»è¦åŒ…å«äº†ï¼š
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">Pose</code> ä½ç½®å§¿åŠ¿ï¼ŒåŒ…æ‹¬è½¦å¤´æœå‘ï¼Œåœ¨åœ°å›¾ä¸Šçš„çº¿é€Ÿåº¦ã€çº¿åŠ é€Ÿåº¦å’Œç›¸å¯¹ä½ç½®ï¼Œè§’é€Ÿåº¦ã€ä»°è§’åº¦ç­‰</li>
      <li>æµ‹é‡ä¸Šè¿°å§¿åŠ¿çš„æ—¶åˆ»</li>
      <li>è½¦è¾†å·²ç»ç»è¿‡çš„è½¨è¿¹ç‚¹åˆ—</li>
      <li>MSF å®šä½çŠ¶æ€ä¸è´¨é‡</li>
    </ul>
  </li>
</ul>

<p>ä¸Šé¢çš„ä¸‰æ¡æ¶ˆæ¯éƒ½æ˜¯é€šè¿‡ <code class="language-plaintext highlighter-rouge">Proc()</code> å‡½æ•°çš„å‚æ•°ä¼ æ¥çš„ï¼Œå›é¡¾ä¸€ä¸‹<a href="https://dingfen.github.io/apollo/2020/11/07/CyberCommu2.html">åœ¨é€šä¿¡é‡Œè®²è¿‡çš„è¿‡ç¨‹</a>ï¼Œè¿™ä¸‰æ¡ä¿¡æ¯ä¼šè¢«èåˆèµ·æ¥ï¼Œéšåç¨‹åºä¼šå”¤é†’å°è£…äº† <code class="language-plaintext highlighter-rouge">Component::Process()</code> çš„åç¨‹ï¼Œè®©åç¨‹å¤„äº Ready çŠ¶æ€ï¼Œæœ€åé€šè¿‡è°ƒåº¦ç®—æ³•ä¼šè®©æŸä¸ªçº¿ç¨‹å¯¹å®ƒè¿›è¡Œæ‰§è¡Œã€‚è€Œä»¥ä¸‹ä»‹ç»çš„äº”æ¡æ¶ˆæ¯ï¼Œä¸ä¸Šä¸‰æ¡ä¸ä¸€æ ·ï¼Œè¿™äº›æ¶ˆæ¯ï¼Œæ˜¯é€šè¿‡ <code class="language-plaintext highlighter-rouge">Reader</code> è·å¾—çš„ï¼Œå›é¡¾<a href="https://dingfen.github.io/apollo/2020/11/03/CyberCommu1.html#reader-%E7%B1%BB">åœ¨è¿™ç¯‡åšå®¢é‡Œè®²çš„è®¢é˜…è€…å†…å®¹</a>ï¼Œè¿™äº›æ¶ˆæ¯åˆ°æ¥åï¼Œç¨‹åºä¼šå”¤é†’å°è£…äº†<em>å…¥é˜Ÿæ“ä½œ</em>å’Œ <em><code class="language-plaintext highlighter-rouge">Reader</code> å›è°ƒå‡½æ•°</em>çš„åç¨‹ï¼Œè®©å®ƒå¤„äº Ready çŠ¶æ€ï¼Œæœ€åè°ƒåº¦ç®—æ³•è°ƒåº¦æŸä¸ªçº¿ç¨‹è¿›è¡Œæ‰§è¡Œã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±è¯¦ç»†çœ‹ä¸€ä¸‹è¿™äº”æ¡æ¶ˆæ¯å§ï¼š</p>

<ul>
  <li>traffic_light è·å¾—ç°åœ¨çš„äº¤é€šä¿¡å·ç¯æƒ…å†µï¼Œç±»å‹ä¸º <code class="language-plaintext highlighter-rouge">TrafficLightDetection</code> ï¼Œæ¥è‡ª<strong>æ„ŸçŸ¥æ¨¡å—</strong>ï¼Œè¯¥ç±»åœ¨ <code class="language-plaintext highlighter-rouge">modules/perception/camera/lib/traffic_light/detector/detection/detection.h</code> ä¸­å®šä¹‰ï¼Œä¸»è¦æ˜¯ä»æ‘„åƒæœºæ‹æ‘„çš„å›¾ç‰‡ä¸­è·å¾—ç›®å‰çš„ä¿¡å·ç¯æƒ…å†µ</li>
  <li>routing å¯¼èˆªè·¯çº¿ï¼Œç±»å‹ä¸º <code class="language-plaintext highlighter-rouge">RoutingResponse</code> ï¼Œæ¥è‡ª<strong>è·¯ç”±æ¨¡å—</strong>ï¼Œä» <code class="language-plaintext highlighter-rouge">RoutingComponent</code> ç±»çœ‹å‡ºï¼Œ<code class="language-plaintext highlighter-rouge">RoutingResponse</code> å°±æ˜¯è¯¥ç»„ä»¶å‘å¸ƒçš„æ¶ˆæ¯ç±»ï¼Œç±»åœ¨ <code class="language-plaintext highlighter-rouge">modules/routing/proto/routing.proto</code> æ–‡ä»¶ä¸­å®šä¹‰ï¼Œ<code class="language-plaintext highlighter-rouge">RoutingResponse</code> åŒ…å«æœ‰ï¼š
    <ul>
      <li>å¯¼èˆªä¸­è¦é€šè¿‡çš„é“è·¯ï¼Œä»¥åŠæ€»è·¯ç¨‹ç­‰</li>
      <li>
<code class="language-plaintext highlighter-rouge">RoutingRequest</code> å¯ç†è§£ä¸ºè¦å“åº”çš„è·¯ç”±è¯·æ±‚</li>
      <li>åœ°å›¾ç‰ˆæœ¬å’Œç°åœ¨çš„çŠ¶æ€ç­‰</li>
    </ul>
  </li>
  <li>relative_map ç›¸å¯¹åœ°å›¾ï¼Œç±»å‹ä¸º <code class="language-plaintext highlighter-rouge">MapMsg</code>ï¼Œæ˜¯<code class="language-plaintext highlighter-rouge">RelativeMapComponent</code> ç±»å‘å‡ºçš„ä¸€ä¸ªç›¸å¯¹åœ°å›¾æ¶ˆæ¯ï¼Œåœ¨ <code class="language-plaintext highlighter-rouge">modules/map/relative_map/proto/navigation.proto</code> æ–‡ä»¶ä¸­å®šä¹‰ï¼ŒåŒ…å«
    <ul>
      <li>
<code class="language-plaintext highlighter-rouge">Header</code> å¤´ç»“æ„</li>
      <li>è½¦è¾†çš„é«˜æ¸…çš„ä¸‰ç»´åæ ‡ï¼Œå®šä½ä¿¡æ¯</li>
      <li>ç³»ç»Ÿä¸­çš„ç¼–å·ä¸å¯¹åº”çš„è·¯åã€è½¦é“è¡¨</li>
      <li>ä»æ„ŸçŸ¥æ¨¡å—ä¸­è·å¾—çš„è½¦é“çº¿æ ‡è®°</li>
    </ul>
  </li>
  <li>pad_msg ä¾¿ç¬ºï¼Œç±»åœ¨ <code class="language-plaintext highlighter-rouge">modules/planning/proto/pad_msg.proto</code> å®šä¹‰ï¼Œé™¤äº†ä¸€ä¸ªå¤´ç»“æ„å¤–ï¼Œä»…åŒ…å«äº†é©¾é©¶åŠ¨ä½œï¼Œæ¯”å¦‚ç›´è¡Œè·Ÿéšï¼Œå·¦å³å˜é“ï¼Œé è¾¹åœè½¦ç­‰ã€‚</li>
</ul>

<h3 id="ç”Ÿæˆè½¨è¿¹">ç”Ÿæˆè½¨è¿¹</h3>

<p>åœ¨<a href="#Init">åˆå§‹åŒ–</a>å°èŠ‚ä¸­ï¼Œæ ¹æ® <code class="language-plaintext highlighter-rouge">FLAGS_use_navigation_mode</code> çš„è®¾ç½®ï¼Œ <code class="language-plaintext highlighter-rouge">planning_base_</code> ä¼šæŒ‡å‘ä¸åŒçš„å­ç±»ï¼Œæˆ– <code class="language-plaintext highlighter-rouge">NaviPlanning</code> ç±»æˆ–æ˜¯ <code class="language-plaintext highlighter-rouge">OnLanePlanning</code> ç±»ï¼Œç„¶åè°ƒç”¨ <code class="language-plaintext highlighter-rouge">RunOnce()</code> å‡½æ•°ã€‚</p>

<p>é¦–å…ˆæ¥çœ‹ä¸€ä¸‹é»˜è®¤çš„è§„åˆ’ç±»çš„ <code class="language-plaintext highlighter-rouge">OnLanePlanning::RunOnce()</code> å‡½æ•°ï¼Œå›é¡¾ä¸€ä¸‹ <code class="language-plaintext highlighter-rouge">Component::Proc()</code> å‡½æ•°çš„è°ƒç”¨å’Œç»„ä»¶çš„ç›¸å…³çŸ¥è¯†ï¼Œä½ åº”è¯¥å°±ä¼šæ˜ç™½å®ƒæ˜¯<strong>äº‹ä»¶è§¦å‘</strong>çš„ï¼Œè€Œä¸æ˜¯æ—¶é—´è§¦å‘çš„ã€‚è¯¥å‡½æ•°å¾ˆé•¿å¾ˆå¤æ‚ï¼Œå¾ˆå¤šåœ°æ–¹æˆ‘ä¹Ÿå¹¶ä¸å…³å¿ƒï¼ˆè€Œä¸”ä¹Ÿçœ‹ä¸æ‡‚ï¼‰ï¼Œè‹¥æœ‰æœºä¼šï¼Œå¯ä»¥ç»†è‡´åœ°ç ”ç©¶ä¸€ä¸‹ï¼Œå¤§ä½“ä¸Šï¼Œå®ƒå®Œæˆäº†ä»¥ä¸‹æ­¥éª¤ï¼š</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="n">OnLanePlanning</span><span class="o">::</span><span class="n">RunOnce</span><span class="p">(</span><span class="k">const</span> <span class="n">LocalView</span><span class="o">&amp;</span> <span class="n">local_view</span><span class="p">,</span>
                             <span class="n">ADCTrajectory</span><span class="o">*</span> <span class="k">const</span> <span class="n">ptr_trajectory_pb</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//  æ›´æ–°æ±½è½¦çŠ¶æ€å’Œå‚è€ƒçº¿çš„çŠ¶æ€ï¼Œå¦‚æœçŠ¶æ€æ— æ•ˆï¼Œç›´æ¥è¿”å›</span>
    <span class="c1">//  ...  </span>
    <span class="c1">// æ˜¯å¦ä¸ºå‡ºç°å¯¼èˆªè·¯çº¿å˜æ¢ï¼Œå¦‚æœæ˜¯ åˆå§‹åŒ– planner</span>
    <span class="c1">//  åŠ ä¸Šé¢„ä¼°çš„è§„åˆ’è§¦å‘çš„å‘¨æœŸ å¾—åˆ° stitchingTrajectory</span>
  <span class="c1">// planning is triggered by prediction data, but we can still use an estimated</span>
  <span class="c1">// cycle time for stitching</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">InitFrame</span><span class="p">(</span><span class="n">frame_num</span><span class="p">,</span> <span class="n">stitching_trajectory</span><span class="p">.</span><span class="n">back</span><span class="p">(),</span> <span class="n">vehicle_state</span><span class="p">);</span>
    <span class="c1">//  åˆ¤æ–­æ˜¯å¦ç¬¦åˆäº¤é€šè§„åˆ™</span>
    <span class="c1">//  å¼€å§‹æ­£åœ¨çš„è§„åˆ’ planner å¼€å§‹è§„åˆ’</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">Plan</span><span class="p">(</span><span class="n">start_timestamp</span><span class="p">,</span> <span class="n">stitching_trajectory</span><span class="p">,</span> <span class="n">ptr_trajectory_pb</span><span class="p">);</span>
    <span class="c1">//  è®°å½•è§„åˆ’æ‰€èŠ±è´¹çš„æ—¶é—´</span>
    <span class="c1">//  ...</span>
<span class="p">}</span>
</code></pre></div></div>

<p>é‚£ä¹ˆ <code class="language-plaintext highlighter-rouge">Planner</code> åˆæ˜¯ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿäº‹å®ä¸Šæ‰ <code class="language-plaintext highlighter-rouge">OnLanePlanning::Init()</code> å‡½æ•°ä¸­å°±å·²ç»æ ¹æ®é…ç½®æ–‡ä»¶ï¼Œç”± <code class="language-plaintext highlighter-rouge">PlannerDispatcher</code> æŒ‡å®šäº†ã€‚æˆ‘ä¸€å…±å‘ç° 4 ç§ç”¨äºä¸åŒåœºæ™¯çš„ <code class="language-plaintext highlighter-rouge">Planner</code> ï¼š</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">RTKReplayPlanner</code>  æ ¹æ®å½•åˆ¶çš„è½¨è¿¹æ¥è§„åˆ’è¡Œè½¦è·¯çº¿</li>
  <li>
<code class="language-plaintext highlighter-rouge">PublicRoadPlanner</code> å¼€æ”¾é“è·¯çš„è½¨è¿¹è§„åˆ’å™¨</li>
  <li>
<code class="language-plaintext highlighter-rouge">LatticePlanner</code>  åŸºäºç½‘æ ¼ç®—æ³•çš„è½¨è¿¹è§„åˆ’å™¨</li>
  <li>
<code class="language-plaintext highlighter-rouge">NaviPlanner</code>  åŸºäºå®æ—¶ç›¸å¯¹åœ°å›¾çš„è§„åˆ’å™¨</li>
</ul>

<p>æœªå®Œå¾…ç»­â€¦â€¦</p>

<h2 id="å‚è€ƒ">å‚è€ƒ</h2>

<p>[1] <a href="https://github.com/ApolloAuto/apollo/">Github Apollo</a></p>

<p>[2] <a href="https://github.com/ApolloAuto/apollo/blob/r5.5.0/modules/planning/README.md">Apollo Planning Docs</a></p>

<p>[3] <a href="https://github.com/daohu527/Dig-into-Apollo/tree/master/modules/planning">apolloä»‹ç»ä¹‹planningæ¨¡å—</a></p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> tag: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#apollo" class="page__taxonomy-item" rel="tag">Apollo</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#cyber-rt" class="page__taxonomy-item" rel="tag">Cyber RT</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> category: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#apollo" class="page__taxonomy-item" rel="tag">Apollo</a>
    
    </span>
  </p>


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> update time:</strong> <time datetime="2020-11-11T00:00:00+08:00">November 11, 2020</time></p>


      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">share</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Apollo+Planning+%E8%A7%84%E5%88%92%E6%A8%A1%E5%9D%97%20http%3A%2F%2Flocalhost%3A4000%2Fapollo%2F2020%2F11%2F11%2FApolloPlanning.html" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="share Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Fapollo%2F2020%2F11%2F11%2FApolloPlanning.html" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="share Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Flocalhost%3A4000%2Fapollo%2F2020%2F11%2F11%2FApolloPlanning.html" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="share LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/apollo/2020/11/07/CyberCommu2.html" class="pagination--pager" title="Apollo Cyber RT é€šä¿¡ï¼ˆä¸‹ï¼‰
">previous</a>
    
    
      <a href="/apollo/2020/11/18/CyberServiceDiscovery.html" class="pagination--pager" title="Apollo Cyber RT æœåŠ¡ä¸æœåŠ¡å‘ç°
">next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">related</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/img/teaser.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/cpp/2022/03/08/gem5-2.html" rel="permalink">æ·±å…¥ç†è§£ Gem5 ä¹‹äºŒ
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  6 minutes read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">å…³äºgem5ä¸­åºåˆ—åŒ–ç­‰å®ç°
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/img/teaser.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/cpp/2022/02/24/gem5-1.html" rel="permalink">æ·±å…¥ç†è§£ Gem5 ä¹‹ä¸€
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  7 minutes read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">å…³äºgem5äº‹ä»¶çš„å®ç°
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/img/teaser.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/cpp/2021/11/15/Qt-signal-slot.html" rel="permalink">ä¿¡å·æ§½æœºåˆ¶çš„ç®€é™‹å®ç°
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  4 minutes read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/img/teaser.jpg" alt="">
      </div>
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/mpi&amp;openmp/2021/10/20/cuda-with-matmul.html" rel="permalink">CUDA ä¸­çš„çŸ©é˜µä¹˜
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  3 minutes read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">åŠ¨æ‰‹ä¹¦å†™ CUDA æ ¸å‡½æ•°
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap">
<form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="è¾“å…¥æ‚¨è¦æœç´¢çš„å…³é”®è¯...">
  </form>
  <div id="results" class="results"></div>
</div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>follow:</strong></li>
    

    
      
        
          <li><a href="https://github.com/dingfen" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> Github</a></li>
        
      
        
          <li><a href="df12138@mail.ustc.edu.cn" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email</a></li>
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">Â© 2022 Bill Ding. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




    
  <script>
    var disqus_config = function () {
      this.page.url = "http://localhost:4000/apollo/2020/11/11/ApolloPlanning.html";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/apollo/2020/11/11/ApolloPlanning"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://https://dingfen.github.io/.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>


  





  </body>
</html>
